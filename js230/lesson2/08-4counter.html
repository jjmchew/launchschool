<!DOCTYPE html>
<html>
  <head>
    <title>Question 4</title>
    <style>
      .composer {
        background: #f5f5f5;
        padding:  1em;
        width:  30em;
      }

      .composer textarea {
        width: 100%;
        height: 4em;
      }

      .composer textarea.invalid {
        color: red;
      }
    </style>
    <script>
      document.addEventListener('DOMContentLoaded', event => {
        let textarea = document.querySelector('textarea');
        let button = document.querySelector('button');
        let p = document.querySelector('p.counter');

        let updateMsg = () => {
          let charCount = textarea.value.length;
          p.textContent = `${(140 - charCount).toString()} characters remaining`;

          // make note of the pattern below - much simpler than manually changing colour, etc. and more flexible
          let invalid = charCount > 140;
          textarea.classList.toggle('invalid', invalid);
          button.disabled = invalid;
        };

        textarea.addEventListener('keyup', updateMsg)
        updateMsg();
      });
    </script>
  </head>
  <body>
    <div class="composer">
      <textarea placeholder="Enter your message"></textarea>
      <p class="counter"></p>
      <button type="submit">Post Message</button>
    </div>
  </body>
</html>